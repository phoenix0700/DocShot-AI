# =====================================================
# DOCSHOT AI - PRODUCTION ENVIRONMENT TEMPLATE
# =====================================================
# Copy this file to .env.production and fill in your actual values
# NEVER commit this file with real secrets to version control

# =====================================================
# APPLICATION CONFIGURATION
# =====================================================
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://your-app-domain.com

# =====================================================
# DATABASE (SUPABASE)
# =====================================================
# Get these from: https://supabase.com/dashboard/project/[ref]/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://[project-ref].supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.[service_role_key]

# =====================================================
# AUTHENTICATION (CLERK)
# =====================================================
# Get these from: https://dashboard.clerk.com/apps/[app-id]/api-keys
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_live_[your_publishable_key]
CLERK_SECRET_KEY=sk_live_[your_secret_key]

# Webhook secret for user sync (from Clerk webhooks)
CLERK_WEBHOOK_SECRET=whsec_[your_webhook_secret]

# =====================================================
# REDIS QUEUE (UPSTASH)
# =====================================================
# Get this from: https://console.upstash.com/redis/[db-id]
# Use the TLS connection string for production
REDIS_URL=rediss://default:[password]@[region]-[db-id].upstash.io:6380

# =====================================================
# FILE STORAGE (CLOUDFLARE R2)
# =====================================================
# Get these from: https://dash.cloudflare.com/[account]/r2/overview/api-tokens
S3_BUCKET=docshot-screenshots-prod
S3_ACCESS_KEY=[r2_access_key_id]
S3_SECRET_KEY=[r2_secret_access_key]
S3_ENDPOINT=https://[account-id].r2.cloudflarestorage.com
S3_REGION=auto

# Public URL for accessing images (optional, for CDN)
S3_PUBLIC_URL=https://pub-[id].r2.dev

# =====================================================
# EMAIL NOTIFICATIONS (GMAIL SMTP)
# =====================================================
# Set up App Password: https://support.google.com/accounts/answer/185833
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=notifications@yourdomain.com
SMTP_PASS=[gmail_app_password]
SMTP_FROM="DocShot AI <notifications@yourdomain.com>"

# =====================================================
# WORKER CONFIGURATION
# =====================================================
# Adjust based on your server capacity
SCREENSHOT_CONCURRENCY=3
DIFF_CONCURRENCY=5
NOTIFICATION_CONCURRENCY=10

# Health check port (Railway/Docker will set PORT automatically)
WORKER_HEALTH_PORT=3001

# =====================================================
# GITHUB INTEGRATION (OPTIONAL)
# =====================================================
# For automatic commit features
# Get these from: https://github.com/settings/apps/[app-name]
GITHUB_APP_ID=[your_github_app_id]
GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n[your_private_key]\n-----END RSA PRIVATE KEY-----"
GITHUB_WEBHOOK_SECRET=[your_webhook_secret]

# =====================================================
# MONITORING & SECURITY
# =====================================================
# Generate a strong 32-character encryption key
ENCRYPTION_KEY=[generate_32_character_key]

# Generate a strong JWT secret
JWT_SECRET=[generate_strong_jwt_secret]

# API rate limiting (requests per minute)
RATE_LIMIT_RPM=100

# =====================================================
# FEATURE FLAGS
# =====================================================
# Enable/disable features in production
ENABLE_SCREENSHOT_SCHEDULING=true
ENABLE_GITHUB_INTEGRATION=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_VISUAL_DIFF=true

# =====================================================
# LOGGING & DEBUGGING
# =====================================================
# Set to 'error' for production, 'debug' for troubleshooting
LOG_LEVEL=error

# Enable structured logging for production monitoring
ENABLE_JSON_LOGS=true

# =====================================================
# BACKUP & DISASTER RECOVERY
# =====================================================
# S3 bucket for database backups (optional)
BACKUP_S3_BUCKET=docshot-backups-prod
BACKUP_S3_ACCESS_KEY=[backup_access_key]
BACKUP_S3_SECRET_KEY=[backup_secret_key]

# =====================================================
# INSTRUCTIONS
# =====================================================
#
# 1. SETUP SERVICES:
#    - Create Supabase project: https://supabase.com/dashboard
#    - Create Upstash Redis: https://console.upstash.com
#    - Create Cloudflare R2 bucket: https://dash.cloudflare.com
#    - Set up Clerk application: https://dashboard.clerk.com
#
# 2. FILL IN VALUES:
#    - Replace all [placeholder] values with your actual credentials
#    - Generate strong secrets for ENCRYPTION_KEY and JWT_SECRET
#    - Update NEXT_PUBLIC_APP_URL with your domain
#
# 3. DEPLOY:
#    - Set these variables in Vercel (web app)
#    - Set these variables in Railway (worker)
#    - Test connections with: tsx scripts/test-production-services.ts
#
# 4. SECURITY CHECKLIST:
#    - [ ] All secrets are unique and strong
#    - [ ] TLS enabled for all connections
#    - [ ] Database RLS policies are active
#    - [ ] Backup procedures are tested
#    - [ ] Monitoring alerts are configured
#
# For detailed setup instructions, see: PRODUCTION_SETUP.md